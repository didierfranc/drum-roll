"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react"),simpleCacheProvider=require("simple-cache-provider");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var cache=simpleCacheProvider.createCache(),createFetcher=function(e){var t=simpleCacheProvider.createResource(e);return function(e){return function(){return t(cache,e)}}},INITIAL="initial",LOADING="loading",SUCCESS="success",FAILURE="failure",Fetcher=function(e){function t(){var e,r,n;_classCallCheck(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return _possibleConstructorReturn(n,(r=n=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Object.defineProperty(_assertThisInitialized(n),"state",{configurable:!0,enumerable:!0,writable:!0,value:{status:INITIAL}}),Object.defineProperty(_assertThisInitialized(n),"load",{configurable:!0,enumerable:!0,writable:!0,value:function(e){try{e.then(function(){n.timeout&&clearTimeout(n.timeout),n.setState({status:SUCCESS})})}catch(e){n.setState({status:FAILURE})}}}),Object.defineProperty(_assertThisInitialized(n),"startTimeout",{configurable:!0,enumerable:!0,writable:!0,value:function(){n.timeout=setTimeout(function(){return n.setState({status:LOADING})},n.props.delay)}}),r))}return _inherits(t,react.Component),_createClass(t,[{key:"render",value:function(){var e=this.props,t=e.children,r=e.fetcher;switch(this.state.status){case INITIAL:try{return t(r(),!1,!1)}catch(e){return this.load(e),this.startTimeout(),null}case LOADING:return t(!1,!0,!1);case SUCCESS:return t(r(),!1,!1);case FAILURE:return t(!1,!1,!0)}}}]),t}();Object.defineProperty(Fetcher,"getDerivedStateFromProps",{configurable:!0,enumerable:!0,writable:!0,value:function(){return{status:INITIAL}}}),exports.createFetcher=createFetcher,exports.Fetcher=Fetcher;
//# sourceMappingURL=drum-roll.js.map
